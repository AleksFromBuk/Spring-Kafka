# Реализация системы мониторинга с использованием Spring Kafka

## Цель
Создать систему мониторинга, которая будет отслеживать работу различных компонентов вашего приложения с помощью Spring Kafka. Эта система будет включать в себя Producer для отправки метрик, Consumer для их обработки и анализа, а также REST API для просмотра и анализа метрик.

## Общая архитектура системы

### Producer Service

Создать микросервис "Metrics Producer", который будет отслеживать и собирать метрики работы приложения и отправлять их в Kafka топик `metrics-topic`.

Реализовать следующие API для взаимодействия с микросервисом:

- **POST /metrics:** Отправка метрик работы приложения в формате JSON. Метрики могут включать информацию о производительности, использовании ресурсов, ошибках и т. д.

### Consumer Service

Создать микросервис "Metrics Consumer", который будет принимать метрики из Kafka топика `metrics-topic` и анализировать их для выявления проблем и трендов. Реализовать обработку метрик и вывод статистики в логи или базу данных для последующего анализа.

### REST API

Реализовать REST API в микросервисе "Metrics Consumer" для просмотра метрик:

- **GET /metrics:** Получение списка всех метрик.
- **GET /metrics/{metricName}:** Получение конкретной метрики по ее имени.
- **GET /metrics/{metricName}/max:** Получение максимального значения поля 'measurement'(численное значение измерения) конкретной метрики по ее имени.
- **GET /metrics/{metricName}/min:** Получение минимального значения поля 'measurement'(численное значение измерения) конкретной метрики по ее имени.
- **GET /metrics/{metricName}/avg:** Получение среднего значения поля 'measurement'(численное значение измерения) конкретной метрики по ее имени.

## Запуск и настройка

1. Убедитесь, что у вас установлен и настроен Kafka.
2. Настройте микросервисы "Metrics Producer" и "Metrics Consumer".
3. Запустите оба микросервиса и начните отправку и потребление метрик.

## Пример метрик

Пример JSON для отправки метрик в `Metrics Producer`:

```json
[
        {
            "metricName":"jvm.memory.used",
            "tags":{"area":"nonheap","id":"CodeCache"},
            "measurement":9299072.0
        },
        {
            "metricName":"jvm.memory.used",
            "tags":{"area":"heap","id":"G1 Old Gen"},
            "measurement":1.4887936E7
        },
        {
            "metricName":"jvm.memory.max",
            "tags":{"area":"nonheap","id":"Metaspace"},
            "measurement":-1.0
        },
        {
            "metricName":"jvm.memory.max",
            "tags":{"area":"heap","id":"G1 Survivor Space"},
            "measurement":-1.0
        },
        {
            "metricName":"jvm.memory.max",
            "tags":{"area":"heap","id":"G1 Old Gen"},
            "measurement":2.092957696E9
        }
]
